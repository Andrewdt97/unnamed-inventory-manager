{
    "AWSTemplateFormatVersion": "2010-09-09",
    "Description": "CloudFormation template for Authorization Function",
    "Parameters": {
      "ParameterName": {
        "Type": "String",
        "Description": "The name of the parameter in AWS Systems Manager Parameter Store containing the IP range"
      }
    },
    "Resources": {
      "authorization-lambda": {
        "Type": "AWS::Lambda::Function",
        "Properties": {
          "Code": {},
          "FunctionName": "authorization-lambda",
          "Handler": "lambda_function.lambda_handler",
          "Runtime": "python3.8",
          "MemorySize": 256,
          "Environment": {
            "Variables": {
              "IP_RANGE": { "Fn::Sub": "${SSMParameterValue}" } 
            }
          }
        }
      }
    },
    "Outputs": {
      "LambdaFunctionArn": {
        "Description": "ARN of the Authorization Function Lambda",
        "Value": { "Fn::GetAtt": ["authorization-lambda", "Arn"] },
        "Export": { "Name": "YourExportedLambdaArn" }
      },
      "LambdaFunctionName": {
        "Description": "Name of the Authorization Function Lambda",
        "Value": { "Ref": "authorization-lambda" },
        "Export": { "Name": "YourExportedLambdaName" }
      }
    }
  }
  
